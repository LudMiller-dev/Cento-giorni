<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Racha 100 días — Odómetro Interactivo</title>
  <style>
    :root{ --bg:#0b0f12; --muted:#a1a1a1; }
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:#fff; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif; display:grid; place-items:center}
    .wrap{ text-align:center; padding:16px }
    .label{ font-size:12px; color:var(--muted); letter-spacing:.18em; text-transform:uppercase; margin-bottom:8px }.count{ display:flex; justify-content:center; gap:8px; font-size:84px; font-weight:900; line-height:1; cursor:pointer; user-select:none; }
.digit-col{ height:1em; overflow:hidden; filter:drop-shadow(0 2px 10px rgba(0,0,0,.25)); min-width:.6em; }
.digit-col.lit{ filter: drop-shadow(0 0 10px rgba(255,230,102,.7)) brightness(1.05); }
.digit-inner{ display:flex; flex-direction:column; will-change:transform; transition: transform .42s cubic-bezier(.25,.8,.4,1); }
.digit-inner span{
  height:1em; display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#fff,#ffe066 40%,#ff9e2c 70%,#ff7b00 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

.suffix{ font-size:18px; color:var(--muted); margin-top:6px }

.message{ margin-top:20px; font-size:28px; font-weight:800; background:linear-gradient(90deg,#ffe066,#ff9e2c,#ff7b00); -webkit-background-clip:text; color:transparent; opacity:0; transform:translateY(10px); transition:.8s }
.message.show{ opacity:1; transform:none }

.count.final{ animation: finaleGlow 1.2s ease-out forwards; }
@keyframes finaleGlow{
  0%{ text-shadow:0 0 0 transparent }
  50%{ text-shadow:0 0 25px rgba(255,230,102,.9),0 0 45px rgba(255,158,44,.7),0 0 70px rgba(255,123,0,.55) }
  100%{ text-shadow:0 0 18px rgba(255,230,102,.7),0 0 34px rgba(255,158,44,.6),0 0 60px rgba(255,123,0,.5) }
}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="label">Racha</div>
    <div class="count" id="count" title="Toca para sumar 10">
      <div class="digit-col"><div class="digit-inner"></div></div>
      <div class="digit-col"><div class="digit-inner"></div></div>
      <div class="digit-col"><div class="digit-inner"></div></div>
    </div>
    <div class="suffix">días</div>
    <div class="message" id="message">¡Felices 100 días, amor! ✨</div>
  </div>  <script>
    const TARGET=100;
    let current=0;
    const msg=document.getElementById('message');
    const countEl=document.getElementById('count');
    const cols=[...countEl.querySelectorAll('.digit-col')];
    const inners=cols.map(c=>c.querySelector('.digit-inner'));
    let lineH=0;

    // Construir 0..9 + extra
    function build(){
      inners.forEach(inner=>{
        inner.innerHTML='';
        for(let i=0;i<=10;i++){
          const sp=document.createElement('span'); sp.textContent=i%10; inner.appendChild(sp);
        }
      });
      requestAnimationFrame(()=>{
        lineH=inners[0].children[0].getBoundingClientRect().height;
        setNumber(0,true);
      });
    }

    const state=[0,0,0];
    const durations=[520,460,400];

    function moveCol(i,targetDigit){
      const inner=inners[i];
      const col=cols[i];
      inner.style.transitionDuration=durations[i]+'ms';
      let current=state[i];
      if(i===0){ col.style.visibility= targetDigit===0? 'hidden':'visible'; }
      let wrap=false, visualTarget=targetDigit;
      if(targetDigit<current){ visualTarget=targetDigit+10; wrap=true; }
      col.classList.add('lit'); setTimeout(()=>col.classList.remove('lit'),220);
      inner.style.transform=`translateY(${-visualTarget*lineH}px)`;
      if(wrap){
        inner.addEventListener('transitionend',()=>{
          const prev=inner.style.transition;
          inner.style.transition='none';
          inner.style.transform=`translateY(${-targetDigit*lineH}px)`;
          void inner.offsetHeight; inner.style.transition=prev;
        },{once:true});
      }
      state[i]=targetDigit;
    }

    function setNumber(n,instant=false){
      const s=String(n).padStart(3,'0');
      const digits=[+s[0],+s[1],+s[2]];
      for(let i=0;i<3;i++){
        if(instant){ inners[i].style.transition='none'; inners[i].style.transform=`translateY(${-digits[i]*lineH}px)`; state[i]=digits[i]; requestAnimationFrame(()=>inners[i].style.transition=''); }
        else if(digits[i]!==state[i]) moveCol(i,digits[i]);
      }
    }

    function addTen(){
      if(current>=TARGET) return;
      current=Math.min(current+10,TARGET);
      setNumber(current);
      if(current===TARGET){ countEl.classList.add('final'); msg.classList.add('show'); }
    }

    build();
    countEl.addEventListener('click',addTen);
    countEl.addEventListener('touchstart',addTen);
  </script></body>
</html>
